<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Arena</title>
    <!-- Main CSS-->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- Font-icon css-->
    <link rel="stylesheet" type="text/css"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body class="app sidebar-mini">
    <!-- NOTE: START: -->
    <!-- loader -->
    <div class="overlay"></div>
    <div class="spanner">
        <div class="loader"></div>
    </div>
    <!-- END: -->
    <!-- Navbar-->
    <header class="app-header"><a class="app-header__logo" href="#">Arena</a>
        <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
            aria-label="Hide Sidebar"></a>
        <!-- Navbar Right Menu-->
        <ul class="app-nav">
            <!-- User Menu-->
            <li><a class="app-nav__item" style="font-size: 15px;text-decoration: none;" href="passbook.html"><span
                        style="border: 1px solid white;padding: 3px;border-radius: 5px;"><img height="17px"
                            style="margin-top:-3px;" src="./assets/shapes/et_wallet.svg" alt="">&nbsp;50</span></a>
            </li>
        </ul>
    </header>
    <!-- Sidebar menu-->
    <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
    <aside class="app-sidebar">
        <div class="app-sidebar__user">
            <img class="app-sidebar__user-avatar" src="https://avatars.githubusercontent.com/u/59704605?v=4"
                alt="User Image">
            <p class="app-sidebar__user-name">Sahoochinmay</p>
            <p class="app-sidebar__user-designation">9937159477</p>
            <a href="profile.html"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit Profile</a>
        </div>
        <ul class="app-menu">
            <li><a class="app-menu__item active" href="home.html"><i class="app-menu__icon fa fa-home"></i><span
                        class="app-menu__label">Home</span></a>
            </li>
            <li><a class="app-menu__item" href="game-rate.html"><i class="app-menu__icon fa  fa-inr"></i><span
                        class="app-menu__label">Game Rate</span></a>
            </li>
            <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
                        class="app-menu__icon fa fa-history"></i><span class="app-menu__label">History</span><i
                        class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li><a class="treeview-item" href="bid-history.html"><i class="icon fa fa-circle-o"></i>Bidding
                            History</a></li>
                    <li><a class="treeview-item" href="win-history.html"><i class="icon fa fa-circle-o"></i>Winning
                            History</a>
                    </li>
                    <li><a class="treeview-item" href="deposite-history.html"><i class="icon fa fa-circle-o"></i>Deposit
                            History</a>
                    </li>
                    <li><a class="treeview-item" href="withdrawal-history.html"><i
                                class="icon fa fa-circle-o"></i>Withdrawal
                            History</a>
                    </li>
                </ul>
            </li>
            <li><a class="app-menu__item" href="withdrawal.html"><i class="app-menu__icon fa fa-money"></i><span
                        class="app-menu__label">Withdrawal</span></a></li>
            <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
                        class="app-menu__icon fa fa-handshake-o"></i><span class="app-menu__label">Help</span><i
                        class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li><a class="treeview-item" href="form-components.html"><i class="icon fa fa-circle-o"></i> Form
                            How to Play</a></li>
                    <li><a class="treeview-item" href="form-custom.html"><i class="icon fa fa-circle-o"></i> Custom
                            Game Rate Card</a></li>
                    <li><a class="treeview-item" href="form-samples.html"><i class="icon fa fa-circle-o"></i> Form
                            Notice </a></li>
                    <li><a class="treeview-item" href="form-notifications.html"><i class="icon fa fa-circle-o"></i> Form
                            Rules Board</a></li>
                </ul>
            </li>
            <li><a class="app-menu__item" href="contact-us.html"><i class="app-menu__icon fa fa-headphones"></i><span
                        class="app-menu__label">Contact Us</span></a></li>
            <li><a class="app-menu__item" href="share.html"><i class="app-menu__icon fa fa-share-alt"></i><span
                        class="app-menu__label">Share with Friends</span></a></li>
            <li><a class="app-menu__item" href="#" onclick="signOut()"><i
                        class="app-menu__icon fa fa-sign-out"></i><span class="app-menu__label">Logout</span></a></li>
        </ul>
    </aside>
    <main class="app-content">
        <div style="background-color: white;height: 125px;  margin-left: -13px;
        margin-right: -13px;" class="d-flex justify-content-center align-items-center">
            <img src="./assets/images/google-ads.png" alt="">
        </div>
        <div class="home_page_main_container">
            <div id="ongoing_tab_content" class="d-flex justify-content-center flex-column">
                <!-- 
                
                 -->
            </div>
        </div>
    </main>
    <!-- Essential javascripts for application to work-->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
    <script src="./js/globalFunction.js"></script>
    <script type="text/javascript" src="js/plugins/bootstrap-notify.min.js"></script>
    <script type="text/javascript">
        // onload
        $(".myAlert-top").hide();
        window.onload = function () {
            startLoader()
            axiosInstance.get('home').then((response) => {
                endLoader()
                if (response.status === 200) {
                    let gameList = response.data.game_list
                    let ongoingTabContent = document.getElementById('ongoing_tab_content')
                    for (let i = 0; i < gameList.length; i++) {
                        switch (gameList[i].status) {
                            case 'open':
                                let timeRemain = calculateTimeRemain(gameList[i]?.market_closetime)
                                ongoingTabContent.innerHTML = ongoingTabContent.innerHTML +
                                    `<div class="ongoing_card">` +
                                    `<img src="./assets/shapes/openRectangle.png" class="game_card_label" alt="Ongoing card">` +
                                    `<img src="./assets/shapes/gameplaybtn.png" onclick="navigate('game.html')" class="game_card_play_btn" alt="Game play">` +
                                    `<h4>${gameList[i]?.market_fullname}</h4>` +
                                    `<small><b>${gameList[i]?.result}</b></small><div>` +
                                    ` <small>Open time - ${convertTime(gameList[i]?.market_opentime)}</small>` +
                                    ` <small class="text-danger">${timeRemain} left</small>` +
                                    `<small >Close time - ${convertTime(gameList[i]?.market_closetime)}</small></div></div>`
                                break;
                            case 'close':
                                ongoingTabContent.innerHTML = ongoingTabContent.innerHTML +
                                    `<div class="ongoing_card">` +
                                    `<img src="./assets/shapes/closeRectangle.png" class="game_card_label" alt="Ongoing card">` +
                                    `<img src="./assets/shapes/gameplaybtn.png" class="game_card_play_btn closed_game_btn" alt="Game play">` +
                                    `<h4>${gameList[i]?.market_fullname}</h4>` +
                                    ` <small><b>${gameList[i]?.result}</small><div>` +
                                    ` <small>Open time - ${convertTime(gameList[i]?.market_opentime)}</small>` +
                                    ` <small>Close time- ${convertTime(gameList[i]?.market_closetime)}</small></div>  </div>`
                                break;
                            case 'upcoming':
                                ongoingTabContent.innerHTML = ongoingTabContent.innerHTML +
                                    `<div class="ongoing_card upcoming_card">` +
                                    `  <img src="./assets/shapes/upcomingRectangle.svg" class="game_card_label" alt="Ongoing card">` +
                                    ` <h4>${gameList[i]?.market_fullname}</h4>` +
                                    ` <p><img src="./assets/shapes/setReminder.svg" />Set Reminder</p><div>` +
                                    ` <small>Open time - ${convertTime(gameList[i]?.market_opentime)}</small>` +
                                    ` <small>Close time- ${convertTime(gameList[i]?.market_closetime)}</small> </div></div>`
                                break;
                            default:
                                break;
                        }
                    }
                } else {
                    $.notify({
                        title: "",
                        message: response.data?.msg,
                        icon: 'fa fa-times'
                    }, {
                        type: "danger",
                    });
                }
                console.log(response)
            }, (error) => {
                console.log('error', error);
                endLoader()
                $.notify({
                    title: "",
                    message: `Something went wrong! Please try again.`,
                    icon: 'fa fa-times'
                }, {
                    type: "danger"
                });
            })
        }
    </script>
</body>

</html>